
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Datasets in Pharmpy &#8212; Pharmpy 0.66.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.0-rc.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modeling" href="modeling.html" />
    <link rel="prev" title="The Pharmpy model" href="model.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">Pharmpy</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="contributors.html">
  About us
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="getting_started.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="user_guide.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="api.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="changelog.html">
  Changelog
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="contribute.html">
  Contribute
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="citation.html">
  References and citation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="license.html">
  License
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributors.html">About us</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model.html">The Pharmpy model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Datasets in Pharmpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling.html">Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelfit.html">Modelfit</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">Plots in Pharmpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonmem_plugin.html">Using the NONMEM plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">The Pharmpy command line interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_r.html">Pharmpy in R</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">References and citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieving-the-dataset-from-a-model">
   Retrieving the dataset from a model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#update-the-dataset-of-a-model">
   Update the dataset of a model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subjects">
   Subjects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#observations">
   Observations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dosing">
   Dosing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extract-dosing-information">
     Extract dosing information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dose-grouping">
     Dose grouping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-after-dose">
     Time after dose
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#concentration-parameters">
     Concentration parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#datainfo">
   DataInfo
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type">
     type
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scale">
     scale
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#continuous">
     continuous
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#categories">
     categories
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unit">
     unit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drop">
     drop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datatype">
     datatype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#descriptor">
     descriptor
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#datainfo-file">
       datainfo file
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="datasets-in-pharmpy">
<h1>Datasets in Pharmpy<a class="headerlink" href="#datasets-in-pharmpy" title="Permalink to this headline">#</a></h1>
<p>Datasets in Pharmpy are represented using the <code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> class and a separate <code class="xref py py-class docutils literal notranslate"><span class="pre">DataInfo</span></code> class that provides additional information about the dataset.
This could contain for example a description of how the columns are used in the model or the units used for the data.</p>
<div class="math notranslate nohighlight">
\[\]</div>
<section id="retrieving-the-dataset-from-a-model">
<h2>Retrieving the dataset from a model<a class="headerlink" href="#retrieving-the-dataset-from-a-model" title="Permalink to this headline">#</a></h2>
<p>The dataset connected to a model can be retrieved from the <cite>dataset</cite> attribute.</p>
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">read_model</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">read_model</span><span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;pheno_real.mod&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">dataset</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>TIME</th>
      <th>AMT</th>
      <th>WGT</th>
      <th>APGR</th>
      <th>DV</th>
      <th>FA1</th>
      <th>FA2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.0</td>
      <td>25.0</td>
      <td>1.4</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>1.4</td>
      <td>7.0</td>
      <td>17.3</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>12.5</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>24.5</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>37.0</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>739</th>
      <td>59</td>
      <td>108.3</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>740</th>
      <td>59</td>
      <td>120.5</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>741</th>
      <td>59</td>
      <td>132.3</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>742</th>
      <td>59</td>
      <td>144.8</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>743</th>
      <td>59</td>
      <td>146.8</td>
      <td>0.0</td>
      <td>1.1</td>
      <td>6.0</td>
      <td>40.2</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>744 rows × 8 columns</p>
</div></div></div>
</div>
<p>This is the dataset after applying any model specific filtering and handling of special values.</p>
<p>The raw dataset can also be accessed</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">raw</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">read_raw_dataset</span><span class="p">()</span>
<span class="n">raw</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>TIME</th>
      <th>AMT</th>
      <th>WGT</th>
      <th>APGR</th>
      <th>DV</th>
      <th>FA1</th>
      <th>FA2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.</td>
      <td>25.0</td>
      <td>1.4</td>
      <td>7</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2.0</td>
      <td>0</td>
      <td>1.4</td>
      <td>7</td>
      <td>17.3</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>12.5</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>24.5</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>37.0</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>7</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>739</th>
      <td>59</td>
      <td>108.3</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>740</th>
      <td>59</td>
      <td>120.5</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>741</th>
      <td>59</td>
      <td>132.3</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>742</th>
      <td>59</td>
      <td>144.8</td>
      <td>3.0</td>
      <td>1.1</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>743</th>
      <td>59</td>
      <td>146.8</td>
      <td>0</td>
      <td>1.1</td>
      <td>6</td>
      <td>40.2</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>744 rows × 8 columns</p>
</div></div></div>
</div>
<p>Note that all values here are strings</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">raw</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>ID      object
TIME    object
AMT     object
WGT     object
APGR    object
DV      object
FA1     object
FA2     object
dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="update-the-dataset-of-a-model">
<h2>Update the dataset of a model<a class="headerlink" href="#update-the-dataset-of-a-model" title="Permalink to this headline">#</a></h2>
<p>A new or updated dataset can be set to a model</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;DV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DV&#39;</span><span class="p">],</span> <span class="n">where</span><span class="o">=</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DV&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="subjects">
<h2>Subjects<a class="headerlink" href="#subjects" title="Permalink to this headline">#</a></h2>
<p>An array of all subject IDs can be retrieved.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_ids</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">read_model</span><span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;pheno_real.mod&quot;</span><span class="p">)</span>
<span class="n">get_ids</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>[1,
 2,
 3,
 4,
 5,
 6,
 7,
 8,
 9,
 10,
 11,
 12,
 13,
 14,
 15,
 16,
 17,
 18,
 19,
 20,
 21,
 22,
 23,
 24,
 25,
 26,
 27,
 28,
 29,
 30,
 31,
 32,
 33,
 34,
 35,
 36,
 37,
 38,
 39,
 40,
 41,
 42,
 43,
 44,
 45,
 46,
 47,
 48,
 49,
 50,
 51,
 52,
 53,
 54,
 55,
 56,
 57,
 58,
 59]
</pre></div>
</div>
</div>
</div>
<p>The number of subjects in the dataset could optionally be retrieved directly.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_number_of_individuals</span>
<span class="n">get_number_of_individuals</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>59
</pre></div>
</div>
</div>
</div>
</section>
<section id="observations">
<h2>Observations<a class="headerlink" href="#observations" title="Permalink to this headline">#</a></h2>
<p>The observations of the dataset indexed on subject ID and the independent variable can be extracted.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_observations</span>
<span class="n">get_observations</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>ID  TIME 
1   2.0      17.3
    112.5    31.0
2   2.0       9.7
    63.5     24.6
    135.5    33.0
             ... 
58  47.5     27.9
    131.8    31.0
59  1.8      22.6
    73.8     34.3
    146.8    40.2
Name: DV, Length: 155, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The total number of observations can optionally be retrieved directly.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_number_of_observations</span>
<span class="n">get_number_of_observations</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>155
</pre></div>
</div>
</div>
</div>
</section>
<section id="dosing">
<h2>Dosing<a class="headerlink" href="#dosing" title="Permalink to this headline">#</a></h2>
<section id="extract-dosing-information">
<h3>Extract dosing information<a class="headerlink" href="#extract-dosing-information" title="Permalink to this headline">#</a></h3>
<p>The doses of the dataset indexed on subject ID and the independent variable can be extracted.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_doses</span>
<span class="n">doses</span> <span class="o">=</span> <span class="n">get_doses</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">doses</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>ID  TIME 
1   0.0      25.0
    12.5      3.5
    24.5      3.5
    37.0      3.5
    48.0      3.5
             ... 
59  96.0      3.0
    108.3     3.0
    120.5     3.0
    132.3     3.0
    144.8     3.0
Name: AMT, Length: 589, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>All unique doses can be listed</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doses</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>array([25. ,  3.5, 15. ,  3.8, 30. ,  3.7, 18.6,  2.3, 27. ,  3.4, 24. ,
        3. , 19. ,  2.4,  3.2, 26. ,  3.3,  5. , 11. ,  2.8, 22. , 12. ,
        4. , 20. ,  2.5, 10. , 17.5,  4.5, 60. ,  7.5, 63. , 32. ,  1.9,
        1.5,  2. , 70. ,  9. , 35. , 18. , 17. ,  4.3, 34. ,  6. , 56. ,
       28. ,  7. , 14. , 16. , 40. ,  6.7,  1.7,  9.5,  4.4, 22.8])
</pre></div>
</div>
</div>
</div>
<p>as well as the largest and the smallest dose</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doses</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>1.5
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doses</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>70.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="dose-grouping">
<h3>Dose grouping<a class="headerlink" href="#dose-grouping" title="Permalink to this headline">#</a></h3>
<p>It is possible to create a DOSEID that groups each dose period starting from 1.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_doseid</span>
<span class="n">ser</span> <span class="o">=</span> <span class="n">get_doseid</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">ser</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       1
1       1
2       2
3       3
4       4
       ..
739    10
740    11
741    12
742    13
743    13
Name: DOSEID, Length: 744, dtype: int64
</pre></div>
</div>
</div>
</div>
</section>
<section id="time-after-dose">
<h3>Time after dose<a class="headerlink" href="#time-after-dose" title="Permalink to this headline">#</a></h3>
<p>Add a column for time after dose (TAD)</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">add_time_after_dose</span>
<span class="n">add_time_after_dose</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s1">&#39;TAD&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0      0.0
1      2.0
2      0.0
3      0.0
4      0.0
      ... 
739    0.0
740    0.0
741    0.0
742    0.0
743    2.0
Name: TAD, Length: 744, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="concentration-parameters">
<h3>Concentration parameters<a class="headerlink" href="#concentration-parameters" title="Permalink to this headline">#</a></h3>
<p>Extract pharmacokinetic concentration parameters from the dataset</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">get_concentration_parameters_from_data</span>
<span class="n">get_concentration_parameters_from_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;function pharmpy.modeling.data.get_concentration_parameters_from_data(model)&gt;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="datainfo">
<h2>DataInfo<a class="headerlink" href="#datainfo" title="Permalink to this headline">#</a></h2>
<p>Every model has a <cite>DataInfo</cite> object that describes the dataset.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">di</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">datainfo</span>
<span class="n">di</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>name      type   scale  continuous categories           units  drop datatype descriptor
  ID        id nominal       False       None               1 False  float64       None
TIME       idv   ratio        True       None            hour False  float64       None
 AMT      dose   ratio        True       None       milligram False  float64       None
 WGT covariate   ratio        True       None        kilogram False  float64       None
APGR covariate ordinal       False       None               1 False  float64       None
  DV        dv   ratio        True       None milligram/liter False  float64       None
 FA1   unknown   ratio        True       None               1 False  float64       None
 FA2   unknown   ratio        True       None               1 False  float64       None
 TAD   unknown   ratio        True       None               1 False  float64       None
 TAD   unknown   ratio        True       None               1 False  float64       None
</pre></div>
</div>
</div>
</div>
<p>The path to the dataset file if one exists.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">di</span><span class="o">.</span><span class="n">path</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Separator character for the dataset file.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">di</span><span class="o">.</span><span class="n">separator</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;,&#39;
</pre></div>
</div>
</div>
</div>
<p>Each column of the dataset can here be given some additional information.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">datainfo</span><span class="p">[</span><span class="s1">&#39;AMT&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>type               dose
scale             ratio
continuous         True
categories         None
unit          milligram
drop              False
datatype        float64
descriptor         None
Name: AMT
</pre></div>
</div>
</div>
</div>
<section id="type">
<h3>type<a class="headerlink" href="#type" title="Permalink to this headline">#</a></h3>
<p>Column <code class="docutils literal notranslate"><span class="pre">type</span></code> is the role a data column has in the model. Some basic examples of types are <code class="docutils literal notranslate"><span class="pre">id</span></code> for the subject identification column, <code class="docutils literal notranslate"><span class="pre">idv</span></code> for the independent
variable (mostly time), <code class="docutils literal notranslate"><span class="pre">dv</span></code> for the dependent variable and <code class="docutils literal notranslate"><span class="pre">dose</span></code> for the dose amount column. Columns that not have been given any particular type
will get the type value <code class="docutils literal notranslate"><span class="pre">unknown</span></code>. See <a class="reference internal" href="api/pharmpy.ColumnInfo.html#pharmpy.ColumnInfo.type" title="pharmpy.ColumnInfo.type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pharmpy.ColumnInfo.type</span></code></a> for a list of all supported types.</p>
</section>
<section id="scale">
<h3>scale<a class="headerlink" href="#scale" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">scale</span></code> of a column is the statistical scale of measurement of its data using “Stevens’ typology” (see <a class="reference external" href="https://en.wikipedia.org/wiki/Level_of_measurement">https://en.wikipedia.org/wiki/Level_of_measurement</a>). The scale can be one of <code class="docutils literal notranslate"><span class="pre">nominal</span></code> for non-ordered categorical data, <code class="docutils literal notranslate"><span class="pre">ordinal</span></code> for ordered categorical data, <code class="docutils literal notranslate"><span class="pre">interval</span></code> for numeric data were ratios cannot be taken and <code class="docutils literal notranslate"><span class="pre">ratio</span></code> for general numeric data. Note that <code class="docutils literal notranslate"><span class="pre">nominal</span></code> and <code class="docutils literal notranslate"><span class="pre">ordinal</span></code> data is always discrete, but <code class="docutils literal notranslate"><span class="pre">interval</span></code> and <code class="docutils literal notranslate"><span class="pre">ratio</span></code> data can be both discrete and continuous.</p>
</section>
<section id="continuous">
<h3>continuous<a class="headerlink" href="#continuous" title="Permalink to this headline">#</a></h3>
<p>If this is <code class="docutils literal notranslate"><span class="pre">True</span></code> the data is continuous and if it is <code class="docutils literal notranslate"><span class="pre">False</span></code> it is discrete. Note that ratio data can be seen as discrete for example
if it has been rounded to whole numbers and cannot take on any real number.</p>
</section>
<section id="categories">
<h3>categories<a class="headerlink" href="#categories" title="Permalink to this headline">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">list</span></code> of all values that the data column could have. Not all values have to be present in the dataset. Instead <code class="docutils literal notranslate"><span class="pre">categories</span></code> creates a possibility to annotate all possible values. It is also possible to name the categories by using a <code class="docutils literal notranslate"><span class="pre">dict</span></code> from the name to its numerical encoding.</p>
</section>
<section id="unit">
<h3>unit<a class="headerlink" href="#unit" title="Permalink to this headline">#</a></h3>
<p>The physical unit of the column data. Units can be input as a string, e.g. “kg” or “mg/L.”</p>
</section>
<section id="drop">
<h3>drop<a class="headerlink" href="#drop" title="Permalink to this headline">#</a></h3>
<p>A boolean that is set to <cite>True</cite> if the column is not going to be used by the model or <cite>False</cite> otherwise.</p>
</section>
<section id="datatype">
<h3>datatype<a class="headerlink" href="#datatype" title="Permalink to this headline">#</a></h3>
<p>The datatype of the column data. This describes the low level encoding of the data. See <a class="reference internal" href="api/pharmpy.ColumnInfo.html#pharmpy.ColumnInfo.datatype" title="pharmpy.ColumnInfo.datatype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pharmpy.ColumnInfo.datatype</span></code></a> for a list of all supported datatypes.</p>
</section>
<section id="descriptor">
<h3>descriptor<a class="headerlink" href="#descriptor" title="Permalink to this headline">#</a></h3>
<p>The descriptor can provide a high level understanding of the data in a machine readable way. See <a class="reference internal" href="api/pharmpy.ColumnInfo.html#pharmpy.ColumnInfo.descriptor" title="pharmpy.ColumnInfo.descriptor"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pharmpy.ColumnInfo.descriptor</span></code></a> for a list of all supported descriptors.</p>
<section id="datainfo-file">
<h4>datainfo file<a class="headerlink" href="#datainfo-file" title="Permalink to this headline">#</a></h4>
<p>If a dataset file has an accompanying file with the same name and the extension <code class="docutils literal notranslate"><span class="pre">.datainfo</span></code> this will be read in when handling the dataset in Pharmpy. This file is a representation (a serialization) of a <code class="docutils literal notranslate"><span class="pre">DataInfo</span></code> object and its content can be created manually, with an external tool or by Pharmpy. Here is an example of the content:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">di</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;{&quot;columns&quot;: [{&quot;name&quot;: &quot;ID&quot;, &quot;type&quot;: &quot;id&quot;, &quot;scale&quot;: &quot;nominal&quot;, &quot;continuous&quot;: false, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;TIME&quot;, &quot;type&quot;: &quot;idv&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;hour&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;AMT&quot;, &quot;type&quot;: &quot;dose&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;milligram&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;WGT&quot;, &quot;type&quot;: &quot;covariate&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;kilogram&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;APGR&quot;, &quot;type&quot;: &quot;covariate&quot;, &quot;scale&quot;: &quot;ordinal&quot;, &quot;continuous&quot;: false, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;DV&quot;, &quot;type&quot;: &quot;dv&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;milligram/liter&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;FA1&quot;, &quot;type&quot;: &quot;unknown&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;FA2&quot;, &quot;type&quot;: &quot;unknown&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;TAD&quot;, &quot;type&quot;: &quot;unknown&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}, {&quot;name&quot;: &quot;TAD&quot;, &quot;type&quot;: &quot;unknown&quot;, &quot;scale&quot;: &quot;ratio&quot;, &quot;continuous&quot;: true, &quot;categories&quot;: null, &quot;unit&quot;: &quot;1&quot;, &quot;datatype&quot;: &quot;float64&quot;, &quot;drop&quot;: false}], &quot;path&quot;: null}&#39;
</pre></div>
</div>
</div>
</div>
<p>It is a json file with the following top level structure:</p>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>array of columns</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">separator</span></code></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
<p>And the columns structure:</p>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scale</span></code></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">continuous</span></code></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">categories</span></code></p></td>
<td><p>array of numbers or string-number map</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unit</span></code></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">drop</span></code></p></td>
<td><p>boolean</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datatype</span></code></p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">descriptor</span></code></p></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="model.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">The Pharmpy model</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="modeling.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Modeling</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2018-2022; the Pharmpy development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>