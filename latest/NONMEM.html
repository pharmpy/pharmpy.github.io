
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NONMEM &#8212; Pharmpy 0.110.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d10597a4" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=63439bfe" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=dafc297f"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'NONMEM';</script>
    <link rel="icon" href="_static/Pharmpy_symbol.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Citation" href="citation.html" />
    <link rel="prev" title="Contribute" href="contribute.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="May 08, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
    
    <img src="_static/Pharmpy_logo.svg" class="logo__image only-light" alt="Pharmpy 0.110.0 documentation - Home"/>
    <script>document.write(`<img src="_static/Pharmpy_logo_dark.svg" class="logo__image only-dark" alt="Pharmpy 0.110.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributors.html">
                        About us
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guide.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="changelog.html">
                        Changelog
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item current active">
                      <a class="nav-link dropdown-item nav-internal" href="contribute.html">
                        Contribute
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="citation.html">
                        References and citation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="license.html">
                        License
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="developers.html">
                        Documentation for developers
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy/issues" title="Report issues" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-comments fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Report issues</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributors.html">
                        About us
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="getting_started.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guide.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="changelog.html">
                        Changelog
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item current active">
                      <a class="nav-link dropdown-item nav-internal" href="contribute.html">
                        Contribute
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="citation.html">
                        References and citation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="license.html">
                        License
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="developers.html">
                        Documentation for developers
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy/issues" title="Report issues" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-comments fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Report issues</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">NONMEM</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="contribute.html" class="nav-link">Contribute</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">NONMEM</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="nonmem">
<span id="nonmem-section"></span><h1>NONMEM<a class="headerlink" href="#nonmem" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is for NONMEM documentation. The information is intended for non-documented or hard-to-find information that is important for pharmpy developers.</p>
</div>
<section id="dataset">
<h2>Dataset<a class="headerlink" href="#dataset" title="Link to this heading">#</a></h2>
<section id="overview-of-parsing-and-translation-steps">
<h3>Overview of parsing and translation steps<a class="headerlink" href="#overview-of-parsing-and-translation-steps" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Removing commented rows</p></li>
<li><p>Splitting a row into data items</p></li>
<li><p>IGNORE/ACCEPT of rows</p></li>
<li><p>Dropping of columns</p></li>
<li><p>Error handling of non valid items</p></li>
<li><p>Translating TIMEs and DATEs</p></li>
</ul>
</section>
<section id="nm-tran-dataset-parsing">
<h3>NM-TRAN dataset parsing<a class="headerlink" href="#nm-tran-dataset-parsing" title="Link to this heading">#</a></h3>
<p>Some rules for the parsing of the dataset by NM-TRAN. These were tested with NONMEM 7.4.3</p>
<ul class="simple">
<li><p>Delimeter between items is comma, space or TAB.</p></li>
<li><p>Spaces before or after a comma are ignored</p></li>
<li><p>Spaces after a TAB are ignored</p></li>
<li><p>Spaces before a TAB gives ERROR (sic!)</p></li>
<li><p>Spaces in the beginning or of a row are ignored</p></li>
<li><p>Comma in the end or beginning of a row will insert NULL after or before the comma</p></li>
<li><p>Each item can only be numeric i.e. no other characters than Ee+-0123456789 are allowed except for TIME, II, DATE, DATx columns</p></li>
<li><p>The fortran short form for exponential notation is allowed, i.e. 2-1 means 2e-1 and 2+1 means 2e1</p></li>
<li><p>A “D” or “d” instead of “E” or “e” are allowed in exponential notation.</p></li>
<li><p>A lone + or - in an item means 0</p></li>
<li><p>A . (dot) in an item means NULL</p></li>
<li><p>An item can be at most 24 characters long, not counting delimiters and spaces that was eaten by other delimiter</p></li>
<li><p>Empty lines in a dataset will give an error if not BLANKOK is set in $DATA then NULLs are inserted</p></li>
<li><p>As empty lines are counted empty lines and lines only containing spaces and TABs.</p></li>
<li><p>Columns that are DROPed in $INPUT can contain any characters and there is no limit to length of items in such a column</p></li>
<li><p>If any line has more columns than $INPUT all extra columns are considered to be DROPed</p></li>
</ul>
</section>
<section id="comment-lines-ignore-c">
<h3>Comment lines (IGNORE=c)<a class="headerlink" href="#comment-lines-ignore-c" title="Link to this heading">#</a></h3>
<p>Lines starting with the comment regex will be removed from the dataset.</p>
<ul class="simple">
<li><p>If no IGNORE=c has been provided the default regex is <cite>^#</cite></p></li>
<li><p>If IGNORE=c where c is not &#64; the rexex is <cite>^c</cite></p></li>
<li><p>If IGNORE=&#64; the regex is <cite>^\s*[a-zA-Z#]</cite></p></li>
</ul>
</section>
<section id="null-items-in-datasets">
<h3>NULL items in datasets<a class="headerlink" href="#null-items-in-datasets" title="Link to this heading">#</a></h3>
<p>A NULL item is an item in a dataset that is either a ., surrounded by two TABS or two commas. By default NM-TRAN translates a NULL item to a blank field in FDATA which will be interpreted by NONMEM as 0. Using the NULL option to $DATA the default can be changed. However the NULL option is limited to one character and the only legal ones are [0-9-+] since these are numbers. All other values on $DATA will be met with ERROR from NM-TRAN. A double comma or tab at the end of a row will insert a value at the end after giving a big warning. If the number of columns in $INPUT is larger than the length of some row, NM-TRAN will warn and pad with NULLs. NULL items are inserted after the IGNORE filtering so comment characterscannot be inserted using NULL neither can the IGNORE/ACCEPT filter on NULL.</p>
</section>
<section id="ignore-accept">
<h3>IGNORE/ACCEPT<a class="headerlink" href="#ignore-accept" title="Link to this heading">#</a></h3>
<p>Some rules for the IGNORE/ACCEPT option in $DATA:</p>
<ul class="simple">
<li><p>IGNOREs are performed one at a time in the order given. Order is critical in cases where an illegal item gets ignored before it needs to be parsed (i.e. because of a later numeric comparison)</p></li>
<li><p>It is possible to IGNORE on a dropped column</p></li>
<li><p>IGNORE is done before the error check for .EQ. and .NE., i.e. rows with text can be ignored, otherwise the column will be parsed before ignore and give errors appropriately</p></li>
<li><p>Text IGNORE (i.e. .EQ. and .NE.) can contain letter + alphanum/underscore or a real number (no special fortran format), + or - (meaning 0), no digit at start, no ., = has to be enclosed in ‘ or “. Other special characters are ok with or w/o “’.</p></li>
<li><p>With others .EQN, .GE. etc can only use numbers</p></li>
<li><p>A text/number to IGNORE can be enclosed in ‘ or “.</p></li>
<li><p>A value for comparison can maximum have 12 characters (not counting spaces or ‘,” at start or end)</p></li>
<li><p>IGNORE is performed before translating TIME and DATE</p></li>
</ul>
</section>
<section id="time">
<h3>TIME<a class="headerlink" href="#time" title="Link to this heading">#</a></h3>
<p>Time must be non-decreasing for all data records within an individual.</p>
</section>
<section id="date">
<h3>DATE<a class="headerlink" href="#date" title="Link to this heading">#</a></h3>
<p>The DATE, DAT1, DAT2 and DAT3 are special in that they will affect the TIME column. Even if DATE is DROP it will still affect TIME, but cannot be tabled. If DATE and TIME cannot both be tabled and reentered as datasets.</p>
</section>
<section id="id-checking">
<h3>ID checking<a class="headerlink" href="#id-checking" title="Link to this heading">#</a></h3>
<p>NM-TRAN will give warnings if it thinks there is a risk of an ID being truncated because NONMEM will encode IDs as doubles. Here is a (possibly partial) list of the rules that NM-TRAN use to decide whether to put up a warning:</p>
<ul class="simple">
<li><p>If the number is written using scientific notation and has 14 or more digits for the mantissa (in decimal) not counting starting zeroes</p></li>
<li><p>If the number is written using non-scientific notation and has 14 digits or more not counting starting zeroes or trailing zeroes after the decimal point.</p></li>
</ul>
</section>
</section>
<section id="table-files">
<h2>table files<a class="headerlink" href="#table-files" title="Link to this heading">#</a></h2>
<p>This section describes output tables generated by $TABLE</p>
<section id="header">
<h3>Header<a class="headerlink" href="#header" title="Link to this heading">#</a></h3>
<p>The header of a table generated with $TABLE will always use the synonyms of the column names if available. Synonyms will carry over between $TABLE records and can only be set once for each column name.</p>
</section>
</section>
<section id="cov-cor-and-coi-files">
<h2>cov, cor and coi files<a class="headerlink" href="#cov-cor-and-coi-files" title="Link to this heading">#</a></h2>
<p>These are the output of the NONMEM covariance step and will only contain one table for the final estimation (as opposed to phi and ext that will have one table per $EST). The first column called NAME will have contain the parameter names starting in the order THETA, SIGMA, OMEGA. FIX parameters will have all values 0. All offdiagonals for omegas and sigmas will be in the table. The ones that was not used will have all values 0.</p>
</section>
<section id="phi-files">
<h2>phi files<a class="headerlink" href="#phi-files" title="Link to this heading">#</a></h2>
<section id="file-format">
<h3>File format<a class="headerlink" href="#file-format" title="Link to this heading">#</a></h3>
<p>The default format (could this be changed?) of the table part (except the TABLE NO. lines) of a phi-file (probably the same for other types, but for now only phi has been investigated) is as follows:
First the column header line that is formatted like this:</p>
<ol class="arabic simple">
<li><p>One space</p></li>
<li><p>All the column names, except the last one, left justified with a field size of 13 characters</p></li>
<li><p>The final column name</p></li>
</ol>
<p>The column names are</p>
<ol class="arabic simple">
<li><p>SUBJECT_ID</p></li>
<li><p>ID</p></li>
<li><p>One column per ETA of the model named ETA(n) where n is the number of the ETA starting from 1.</p></li>
<li><p>A flattened triangular correlation matrix with columns ETC(1,1), ETC(2,1) up to ETC(n,n) with same n as above and all off diagonals given.</p></li>
<li><p>OBJ</p></li>
</ol>
<p>The data is right justified with a field size of 13 characters (padded with spaces). Except for the final OBJ column that is also right justified, but with a field size of 22 characters.</p>
<p>The number format is integer for the first two columns, scientific with 5 decimals and 2 digits exponent for the ETA and ETC columns. The number in the OBJ column is written in regular decimal format and will always take up 19 characters with first character being space for positive numbers or “-” for negative numbers. For numbers having an integer part of zero will take up 20 characters.</p>
<p>In case of non-integer IDs in the dataset the value in the ID-column will be truncated.</p>
</section>
<section id="all-zero-individuals">
<h3>All zero individuals<a class="headerlink" href="#all-zero-individuals" title="Link to this heading">#</a></h3>
<p>Individuals with no observations will have zeroes in all columns except the SUBJECT_ID and the ID columns</p>
</section>
<section id="phi-phc">
<h3>PHI/PHC<a class="headerlink" href="#phi-phc" title="Link to this heading">#</a></h3>
<p>For EM-algorithms the phi file will have PHI insead of ETA and PHC instead of ETC. PHI and PHC can be used to calculate ETA and ETC.</p>
<p><span class="math notranslate nohighlight">\(\phi_1 = \mu_1 + \eta_1\)</span></p>
<p>PHI(1) = MU_1 + ETA(1)</p>
<p>In case of no mu-referencing MU_i is implicitly 0.</p>
<p>PHC and ETC are equivalent if MU_i is non-random.</p>
<p>PHC(i,i) = <span class="math notranslate nohighlight">\(\operatorname{Var}(\phi_i) = \operatorname{Var}(\mu_i + \eta_i) = \operatorname{Var}(\eta_i)\)</span> = ETC(i,i)</p>
<p>PHC(i,j) = <span class="math notranslate nohighlight">\(\operatorname{Cov}(\phi_i, \phi_j) = \operatorname{Cov}(\mu_i + \eta_i, \mu_j + \eta_j) = \operatorname{Cov}(\eta_i, \eta_j)\)</span> = ETC(i,j)</p>
</section>
</section>
<section id="control-stream">
<h2>control stream<a class="headerlink" href="#control-stream" title="Link to this heading">#</a></h2>
<section id="general">
<h3>general<a class="headerlink" href="#general" title="Link to this heading">#</a></h3>
<p>NULL bytes are allowed in the control stream and evidence points towards it being tokenized as whitespace</p>
</section>
<section id="options-parsing">
<h3>options parsing<a class="headerlink" href="#options-parsing" title="Link to this heading">#</a></h3>
<p>Option values that must be enclosed in parentheses can be split over multiple lines as long as the opening parentheses is on the same line as the keyword and that
each token is kept on one line. For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$DATA file.csv IGNORE=(
   WGT
   .EQ.23
   ,
   WGT.EQ.22
   )
</pre></div>
</div>
</section>
<section id="problem">
<h3>$PROBLEM<a class="headerlink" href="#problem" title="Link to this heading">#</a></h3>
<p>Title text is only allowed on the same line as the $PROBLEM. Putting it on other lines will crash NMTRAN. Whitespace before the first text is not part of the title. There can be no comments on the title line, i.e. comments will be part of the title. The title can maximum be 72 characters including space. Characters coming after the 72 will be ignored.</p>
</section>
<section id="data">
<h3>$DATA<a class="headerlink" href="#data" title="Link to this heading">#</a></h3>
<p>If filename represents a relative path it is relative to the working directory when invoking nmfe.
Multiple $DATA records are allowed in one $PROBLEM. All contents are simply seen as part of one and the same $DATA record.</p>
</section>
<section id="etas">
<h3>$ETAS<a class="headerlink" href="#etas" title="Link to this heading">#</a></h3>
<p>The filename (not the path) for the FILE option in $ETAS can have a maximum of 54 characters (tested with NONMEM 7.4.3). The provided phi-file does not need to have the ETC or OBJ columns.</p>
</section>
</section>
<section id="code-records">
<h2>Code records<a class="headerlink" href="#code-records" title="Link to this heading">#</a></h2>
<p>NM-TRAN allows multiple $PK, $PRED and $ERROR in a model. They simple get merged into one big record in the order they have in the control stream. As long as the first $PK/$PRED/$ERROR follows the regular placement rules the others can be placed at any position after that.</p>
<section id="code-lines">
<h3>Code lines<a class="headerlink" href="#code-lines" title="Link to this heading">#</a></h3>
<p>NONMEM 7.4 does not seem to have a restriction of the line length as NM-TRAN automatically creates continuation lines. Limiting factor is then the number of continuation lines allowed by the compiler. A 11138 characters long line was tested, which generated 445 continuation lines. Even though outside the fortran standards this worked with gfortran 8.3.</p>
</section>
</section>
<section id="derivatives">
<h2>Derivatives<a class="headerlink" href="#derivatives" title="Link to this heading">#</a></h2>
<p>In verbatim code in $ERROR HH(n,j*neps+i) (in $PRED it is called H) will be the second partial derivative of F(n) with respect to EPS(i) and ETA(j)</p>
</section>
<section id="abbreviated-and-verbatim-code">
<h2>Abbreviated and verbatim code<a class="headerlink" href="#abbreviated-and-verbatim-code" title="Link to this heading">#</a></h2>
<p>NM-TRAN sets</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">IMPLICIT </span><span class="kt">REAL</span><span class="p">(</span><span class="nb">KIND</span><span class="o">=</span><span class="n">DPSIZE</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="p">)</span>
</pre></div>
</div>
<p>for the main functions in FSUBS (checked $PK and $ERROR) so variables starting with letters from A-Z doesn’t need to be declared, not even in abbreviated code. However if a variable only used in verbatim code is to be used in $TABLE it must be assigned a value in abbreviated code.</p>
</section>
<section id="results-file-format">
<h2>Results file format<a class="headerlink" href="#results-file-format" title="Link to this heading">#</a></h2>
<section id="sparse-matrix-format">
<h3>Sparse matrix format<a class="headerlink" href="#sparse-matrix-format" title="Link to this heading">#</a></h3>
<p>Lines:</p>
<ol class="arabic simple">
<li><p>Empty line</p></li>
<li><p>Name line</p></li>
<li><p>Value line</p></li>
<li><p>…</p></li>
<li><p>Stop line</p></li>
</ol>
<p>The name and value lines will have 7 entries each, except for the final lines. The name line will have abbreviated symbols for the parameters separated by ‘ | ‘. The abbreviated symbols will be THnn for THETA where nn will be the number or ‘ n’ if only one digit, ‘OMaabb’ or ‘SGaabb’ for OMEGA  or SIGMA, where aa and bb are zero padded matrix indices. Fixed parameters will not be added to the sparse matrix. The value line will be space separated values in scientific notation. For NONMEM 7.4.3 only x.xxE-xx are possible, but NONMEM 7.5 $FORMAT can change the number of digits here. The stop line contains only the string ‘1’.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="contribute.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Contribute</p>
      </div>
    </a>
    <a class="right-next"
       href="citation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Citation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset">Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overview-of-parsing-and-translation-steps">Overview of parsing and translation steps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nm-tran-dataset-parsing">NM-TRAN dataset parsing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comment-lines-ignore-c">Comment lines (IGNORE=c)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#null-items-in-datasets">NULL items in datasets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ignore-accept">IGNORE/ACCEPT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time">TIME</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#date">DATE</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id-checking">ID checking</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-files">table files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#header">Header</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cov-cor-and-coi-files">cov, cor and coi files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#phi-files">phi files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-format">File format</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-zero-individuals">All zero individuals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#phi-phc">PHI/PHC</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#control-stream">control stream</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general">general</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#options-parsing">options parsing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem">$PROBLEM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data">$DATA</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#etas">$ETAS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#code-records">Code records</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#code-lines">Code lines</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#derivatives">Derivatives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abbreviated-and-verbatim-code">Abbreviated and verbatim code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results-file-format">Results file format</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sparse-matrix-format">Sparse matrix format</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2018-2024; the Pharmpy development team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>