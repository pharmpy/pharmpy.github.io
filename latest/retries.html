
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Retries &#8212; Pharmpy 1.3.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d10597a4" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=63439bfe" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=1f29e9d3"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/tabs.js?v=3030b3cb"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'retries';</script>
    <link rel="icon" href="_static/Pharmpy_symbol.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Simulation" href="simulation.html" />
    <link rel="prev" title="Estmethod" href="estmethod.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.3.0" />
    <meta name="docbuild:last-update" content="Oct 24, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
    
    <img src="_static/Pharmpy_logo.svg" class="logo__image only-light" alt="Pharmpy 1.3.0 documentation - Home"/>
    <img src="_static/Pharmpy_logo_dark.svg" class="logo__image only-dark pst-js-only" alt="Pharmpy 1.3.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributors.html">
    About us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="user_guide.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="changelog.html">
    Changelog
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contribute.html">
    Contribute
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="citation.html">
    References and citation
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="license.html">
    License
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="developers.html">
    Documentation for developers
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy/issues" title="Report issues" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Report issues</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributors.html">
    About us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="user_guide.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="changelog.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contribute.html">
    Contribute
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="citation.html">
    References and citation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="license.html">
    License
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="developers.html">
    Documentation for developers
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pharmpy/pharmpy/issues" title="Report issues" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Report issues</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="tools.html">Tools</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="general.html">General</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="common_features.html">Common features</a></li>
<li class="toctree-l3"><a class="reference internal" href="mfl.html">Model Feature Language (MFL)</a></li>
<li class="toctree-l3"><a class="reference internal" href="strictness.html">Strictness</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="amd.html">AMD - automatic model development</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="amd_pk.html">PK</a></li>
<li class="toctree-l3"><a class="reference internal" href="amd_pkpd.html">PKPD</a></li>
<li class="toctree-l3"><a class="reference internal" href="amd_tmdd.html">TMDD</a></li>
<li class="toctree-l3"><a class="reference internal" href="amd_drug_metabolite.html">Drug Metabolite</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="modelsearch.html">Modelsearch - search for best structural model for a PK model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="structsearch.html">Structsearch - search for best structural model for PKPD, drug metabolite and TMDD models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="pkpd.html">PKPD</a></li>
<li class="toctree-l3"><a class="reference internal" href="tmdd.html">TMDD</a></li>
<li class="toctree-l3"><a class="reference internal" href="drug_metabolite.html">Drug Metabolite</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="iivsearch.html">IIVsearch - search for best IIV structure (both variance and covariance)</a></li>
<li class="toctree-l2"><a class="reference internal" href="iovsearch.html">IOVsearch - search for best IOV structure and trim IIV</a></li>
<li class="toctree-l2"><a class="reference internal" href="covsearch.html">COVsearch - identify covariates that explain some of the IIV</a></li>
<li class="toctree-l2"><a class="reference internal" href="ruvsearch.html">RUVsearch - search for best residual error model</a></li>
<li class="toctree-l2"><a class="reference internal" href="allometry.html">allometry - add allometric scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="estmethod.html">estmethod - compare estimation methods and/or solvers</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Retries - Rerun a model with tweaked initial estimates</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulation.html">Simulation - Run a simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="linearize_tool.html">Linearize - Linearize a model</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="modelfit.html">Model estimation and results</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeling.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">The Pharmpy model</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_r.html">Pharmpy in R</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="psn_tools.html">PsN with Pharmpy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdd.html">Case deletion diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="crossval.html">Crossval</a></li>
<li class="toctree-l2"><a class="reference internal" href="frem.html">FREM</a></li>
<li class="toctree-l2"><a class="reference internal" href="linearize.html">Linearize</a></li>
<li class="toctree-l2"><a class="reference internal" href="qa.html">QA</a></li>
<li class="toctree-l2"><a class="reference internal" href="psn_resmod.html">resmod</a></li>
<li class="toctree-l2"><a class="reference internal" href="scm.html">scm</a></li>
<li class="toctree-l2"><a class="reference internal" href="simeval.html">Simeval</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="user_guide.html" class="nav-link">User guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="tools.html" class="nav-link">Tools</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Retries</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="retries">
<span id="id1"></span><h1>Retries<a class="headerlink" href="#retries" title="Link to this heading">#</a></h1>
<p>The retries tool is a tool used to tweak the initial estimates of a given model. The initial estimates of all parameters
are changed slightly which can give better models or show instabilities for the model. When comparing and ranking the new
candidates, the best model is based solely on the ‘OFV’ value.</p>
<section id="running">
<h2>Running<a class="headerlink" href="#running" title="Link to this heading">#</a></h2>
<p>The retries tool is available both in Pharmpy and pharmr.</p>
<p>An example of how to initiate the tool can be seen below</p>
<div class="pharmpy-snippet docutils container">
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-Ug==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-Ug==" name="Ug==" role="tab" tabindex="-1">R</button></div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pharmpy.modeling</span> <span class="kn">import</span> <span class="n">read_model</span>
<span class="kn">from</span> <span class="nn">pharmpy.tools</span> <span class="n">read_modelfit_results</span><span class="p">,</span> <span class="n">run_structsearch</span>

<span class="n">start_model</span> <span class="o">=</span> <span class="n">read_model</span><span class="p">(</span><span class="s1">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">start_model_results</span> <span class="o">=</span> <span class="n">read_modelfit_results</span><span class="p">(</span><span class="s1">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">run_structsearch</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="n">start_model</span><span class="p">,</span>
                        <span class="n">results</span> <span class="o">=</span> <span class="n">start_model_results</span><span class="p">,</span>
                        <span class="n">number_of_candidate</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                        <span class="n">scale</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-Ug==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">from</span><span class="w"> </span><span class="n">pharmpy</span><span class="o">$</span><span class="n">tools</span><span class="w"> </span><span class="n">read_modelfit_results</span><span class="p">,</span><span class="w"> </span><span class="n">run_structsearch</span>

<span class="n">start_model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_model</span><span class="p">(</span><span class="s">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">start_model_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_modelfit_results</span><span class="p">(</span><span class="s">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">run_structsearch</span><span class="p">(</span><span class="n">model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">start_model</span><span class="p">,</span>
<span class="w">                        </span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">start_model_results</span><span class="p">,</span>
<span class="w">                        </span><span class="n">number_of_candidate</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">5</span><span class="p">,</span>
<span class="w">                        </span><span class="n">scale</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;normal&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<section id="arguments">
<h3>Arguments<a class="headerlink" href="#arguments" title="Link to this heading">#</a></h3>
<p>The arguments of the retries tool are listed below.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">model</span></code></p></td>
<td><p>Start model to run retries on</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">results</span></code></p></td>
<td><p>ModelfitResults of the start model</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strictness</span></code></p></td>
<td><p><a class="reference internal" href="strictness.html#strictness"><span class="std std-ref">Strictness</span></a> criteria for model selection.
Default is “minimization_successful or
(rounding_errors and sigdigs&gt;= 0.1)”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">number_of_candidates</span></code></p></td>
<td><p>Number of retry-models to run. 5 is used as default</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p>Determine the allowed increase/decrease for the randomly generated
new initial estimates. Default is 0.1 (10%).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_initial_estimates</span></code></p></td>
<td><p>Use initial parameter estimates when creating candidate models
instead of the final parameter estimates of the input model.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">scale</span></code></p></td>
<td><p><a class="reference internal" href="#scales-retries"><span class="std std-ref">Scale</span></a> to use when randomizing the initial
estimates. Currently supported scales are <code class="docutils literal notranslate"><span class="pre">normal</span></code> and <code class="docutils literal notranslate"><span class="pre">UCP</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">prefix_name</span></code></p></td>
<td><p>String determining prefix of model names such that models are named
{prefix_name}_retries_run2 for instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seed</span></code></p></td>
<td><p>A random number generator or seed to use for random sampling.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="scales">
<span id="scales-retries"></span><h2>Scales<a class="headerlink" href="#scales" title="Link to this heading">#</a></h2>
<p>There are different ways for the tool of computing the retry models. A shared behaviour however, is that all new initial estimates
of parameters are randomly generated. The available scales can be seen in the table below.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>scales</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'normal'</span></code></p></td>
<td><p>Will iteratively try out new, randomly generated initial estimates. If the covariance
matrix for OMEGA(s) and SIGMA(s) is determined to not be positive semi-definite, new
random initial estimates is generated (maximum of 20 times)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'UCP'</span></code></p></td>
<td><p>All parameters get new are transformed to the Unconstrained Parameter Scale (UCP scale)
where new initial values are generated before inverting the transformation. Through
this method, the values are only required to be randomized once.</p></td>
</tr>
</tbody>
</table>
</div>
<section id="normal">
<h3>Normal<a class="headerlink" href="#normal" title="Link to this heading">#</a></h3>
<p>Using the normal scale, the tool is similar to the one found in PsN’s tool parallelle retries. For all parameters, the given initial
estimates is used as a center point for a uniform distribution. The new random initial value is then taken from a uniform
distribution with bound 10% above and below the given initial estimate (or the given upper or lower bound). The new value
is allowed to be at most 10^(⁻6) units from any of the bounds. This is performed for all parameters (THETAs, OMEGAs and
SIGMAs).</p>
<p>Once all new initial values have been computed, the covariance matrix (made from OMEGAs and SIGMAs) will be checked to see
if it’s positive semidefinite or not. If it is, the new retry model will be fitted. If not, new initial values will be
generated for all parameters as described above. This is performed a maxiumum of 20 times. If a positive semi definite
covariance matrix has not been found by then, an error is raised.</p>
</section>
<section id="ucp">
<h3>UCP<a class="headerlink" href="#ucp" title="Link to this heading">#</a></h3>
<p>As opposed to the normal scale, the UCP scale will always return a model with functioning initial
values for all parameters. This is ensured through the use of Unconstrained Parameters. All parameters are transformed
to Unconstrained Parameters. In this value space, new initial values are computed with the same allowed variance, allowing
values to be taken from a uniform distribution of values from 10% below, to 10% above the current initial estimate. With
these changes applied, the inverse Unconstrained Parameters transformation is performed.</p>
<p>As the Unconstrained Parameter Scale is different for each parameter, the relative change might be different
for all parameters and is not limited to +/- 10% of the given inital estimate.</p>
</section>
</section>
<section id="the-retries-results">
<h2>The Retries results<a class="headerlink" href="#the-retries-results" title="Link to this heading">#</a></h2>
<p>The results object contains various summary tables which can be accessed in the results object, as well as files in
.csv/.json format. The name of the selected best model (based on the input selection criteria) is also included.</p>
<p>An example of an entire retries run can be seen below</p>
<div class="pharmpy-snippet docutils container">
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-Ug==" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Ug==" name="Ug==" role="tab" tabindex="-1">R</button></div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">start_model</span> <span class="o">=</span> <span class="n">read_model</span><span class="p">(</span><span class="s1">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">start_model_results</span> <span class="o">=</span> <span class="n">read_modelfit_results</span><span class="p">(</span><span class="s1">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">run_structsearch</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="n">start_model</span><span class="p">,</span>
                        <span class="n">results</span> <span class="o">=</span> <span class="n">start_model_results</span><span class="p">,</span>
                        <span class="n">number_of_candidate</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                        <span class="n">fraction</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
                        <span class="n">scale</span> <span class="o">=</span> <span class="s2">&quot;UCP&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Ug==" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">start_model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_model</span><span class="p">(</span><span class="s">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">start_model_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_modelfit_results</span><span class="p">(</span><span class="s">&#39;path/to/model&#39;</span><span class="p">)</span>
<span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">run_structsearch</span><span class="p">(</span><span class="n">model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">start_model</span><span class="p">,</span>
<span class="w">                        </span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">start_model_results</span><span class="p">,</span>
<span class="w">                        </span><span class="n">number_of_candidate</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">5</span><span class="p">,</span>
<span class="w">                        </span><span class="n">fraction</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span>
<span class="w">                        </span><span class="n">scale</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;UCP&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">summary_tool</span></code> table contains information of the model results and final ranking. It also contains information
regarding how many attempts it took for the model to successfully find a positive semi definite covariance matrix:</p>
<div class="pharmpy-snippet with-output docutils container">
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Number_of_retries</th>
      <th>description</th>
      <th>n_params</th>
      <th>d_params</th>
      <th>dofv</th>
      <th>ofv</th>
      <th>rank</th>
      <th>parent_model</th>
    </tr>
    <tr>
      <th>model</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>retries_run1</th>
      <td>1.0</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>1.922734e-07</td>
      <td>586.276056</td>
      <td>1</td>
      <td>pheno</td>
    </tr>
    <tr>
      <th>retries_run4</th>
      <td>1.0</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>1.383697e-07</td>
      <td>586.276056</td>
      <td>2</td>
      <td>pheno</td>
    </tr>
    <tr>
      <th>retries_run3</th>
      <td>1.0</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>1.302390e-07</td>
      <td>586.276056</td>
      <td>3</td>
      <td>pheno</td>
    </tr>
    <tr>
      <th>retries_run5</th>
      <td>1.0</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>1.061417e-07</td>
      <td>586.276056</td>
      <td>4</td>
      <td>pheno</td>
    </tr>
    <tr>
      <th>pheno</th>
      <td>NaN</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>0.000000e+00</td>
      <td>586.276056</td>
      <td>5</td>
      <td>pheno</td>
    </tr>
    <tr>
      <th>retries_run2</th>
      <td>1.0</td>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>6</td>
      <td>0</td>
      <td>-4.387580e-07</td>
      <td>586.276057</td>
      <td>6</td>
      <td>pheno</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<p>To see information about the actual model runs, such as minimization status, estimation time, and parameter estimates,
you can look at the <code class="docutils literal notranslate"><span class="pre">summary_models</span></code> table. The table is generated with
<a class="reference internal" href="api/pharmpy.tools.summarize_modelfit_results.html#pharmpy.tools.summarize_modelfit_results" title="pharmpy.tools.summarize_modelfit_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">pharmpy.tools.summarize_modelfit_results()</span></code></a>.</p>
<div class="pharmpy-snippet with-output docutils container">
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>description</th>
      <th>minimization_successful</th>
      <th>errors_found</th>
      <th>warnings_found</th>
      <th>ofv</th>
      <th>runtime_total</th>
      <th>estimation_runtime</th>
      <th>PTVCL_estimate</th>
      <th>PTVCL_SE</th>
      <th>PTVCL_RSE</th>
      <th>...</th>
      <th>THETA_3_RSE</th>
      <th>IVCL_estimate</th>
      <th>IVCL_SE</th>
      <th>IVCL_RSE</th>
      <th>IVV_estimate</th>
      <th>IVV_SE</th>
      <th>IVV_RSE</th>
      <th>SIGMA_1_1_estimate</th>
      <th>SIGMA_1_1_SE</th>
      <th>SIGMA_1_1_RSE</th>
    </tr>
    <tr>
      <th>step</th>
      <th>model</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <th>pheno</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276056</td>
      <td>4.0</td>
      <td>0.32</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044731</td>
      <td>...</td>
      <td>0.527072</td>
      <td>0.029351</td>
      <td>0.013415</td>
      <td>0.457068</td>
      <td>0.027906</td>
      <td>0.007477</td>
      <td>0.267918</td>
      <td>0.013241</td>
      <td>0.002279</td>
      <td>0.172147</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">1</th>
      <th>retries_run1</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276056</td>
      <td>21.0</td>
      <td>0.87</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044758</td>
      <td>...</td>
      <td>0.527096</td>
      <td>0.029349</td>
      <td>0.013418</td>
      <td>0.457176</td>
      <td>0.027906</td>
      <td>0.007471</td>
      <td>0.267734</td>
      <td>0.013241</td>
      <td>0.002276</td>
      <td>0.171888</td>
    </tr>
    <tr>
      <th>retries_run2</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276057</td>
      <td>21.0</td>
      <td>0.84</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044716</td>
      <td>...</td>
      <td>0.527011</td>
      <td>0.029350</td>
      <td>0.013416</td>
      <td>0.457114</td>
      <td>0.027906</td>
      <td>0.007475</td>
      <td>0.267856</td>
      <td>0.013241</td>
      <td>0.002280</td>
      <td>0.172226</td>
    </tr>
    <tr>
      <th>retries_run3</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276056</td>
      <td>21.0</td>
      <td>0.84</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044732</td>
      <td>...</td>
      <td>0.527151</td>
      <td>0.029351</td>
      <td>0.013415</td>
      <td>0.457044</td>
      <td>0.027907</td>
      <td>0.007476</td>
      <td>0.267878</td>
      <td>0.013241</td>
      <td>0.002280</td>
      <td>0.172227</td>
    </tr>
    <tr>
      <th>retries_run4</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276056</td>
      <td>8.0</td>
      <td>0.40</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044728</td>
      <td>...</td>
      <td>0.527073</td>
      <td>0.029351</td>
      <td>0.013416</td>
      <td>0.457083</td>
      <td>0.027907</td>
      <td>0.007468</td>
      <td>0.267603</td>
      <td>0.013241</td>
      <td>0.002281</td>
      <td>0.172295</td>
    </tr>
    <tr>
      <th>retries_run5</th>
      <td>PHENOBARB SIMPLE MODEL</td>
      <td>True</td>
      <td>0</td>
      <td>0</td>
      <td>586.276056</td>
      <td>21.0</td>
      <td>0.89</td>
      <td>0.004696</td>
      <td>0.00021</td>
      <td>0.044669</td>
      <td>...</td>
      <td>0.526863</td>
      <td>0.029351</td>
      <td>0.013413</td>
      <td>0.457001</td>
      <td>0.027907</td>
      <td>0.007477</td>
      <td>0.267944</td>
      <td>0.013241</td>
      <td>0.002275</td>
      <td>0.171784</td>
    </tr>
  </tbody>
</table>
<p>6 rows × 25 columns</p>
</div></div></div>
</div>
</div>
<p>Finally, you can see a summary of different errors and warnings in <code class="docutils literal notranslate"><span class="pre">summary_errors</span></code>.
See <code class="xref py py-func docutils literal notranslate"><span class="pre">pharmpy.tools.summarize_errors()</span></code> for information on the content of this table.</p>
<div class="pharmpy-snippet with-output docutils container">
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>time</th>
      <th>message</th>
    </tr>
    <tr>
      <th>model</th>
      <th>category</th>
      <th>error_no</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="estmethod.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Estmethod</p>
      </div>
    </a>
    <a class="right-next"
       href="simulation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Simulation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running">Running</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arguments">Arguments</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scales">Scales</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normal">Normal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ucp">UCP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-retries-results">The Retries results</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2018-2024; the Pharmpy development team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>